#############################################################################################################################
# Prepare the following data objects in text, Excel or R files to run this analysis
# <sample> a table of sample feature saved in a .txt, .tab, .csv, .xlxs, .xls, .rdata, .rda, or .rds file
#   - the first column or the row names of an R object must be unique sample ID matching samples of all 2 comparisons
#   - must have a column corresponding to which comparison the sample belongs to
#   - must have a column corresponding to the compared feature in both comparisons
# <geneset> a list of 2 elements saved in a .rdata, .rda, or .rds file
#   - It should be used for all 2 pairwise comparisons
#   - See https://raw.githubusercontent.com/zhezhangsh/RoCA/master/data/gene.set for examples
#   - The first element of the list is a table of gene set annotation
#   - The second element of this list is itself of a list of gene-gene set mapping
#   - The element names of the seconde element must match the row names of the first element
# <comparison> a table of 2 or 3 columns and 2 rows saved in a .txt, .tab, .csv, .xlxs, .xls, .rdata, .rda, or .rds file
#   - No row and column names
#   - First column is unique names of comparisons
#   - Second column is the URL or path to the result file of each comparison or the output folder of the comparison
#   - if latter, assume the file is <R/result.rds>
#   - (Optionally) third column is the path to the <index.html> file of each comparison
#   - More details at the pairwise comparison template:
#   - https://raw.githubusercontent.com/zhezhangsh/RoCA/master/template/de/pairwise_comparison/pairwise_comparison.Rmd
#############################################################################################################################

####################
##### REQUIRED #####
####################
# Required fields for generating any report using the RoCA::CreateReport() function
# template: https://raw.githubusercontent.com/zhezhangsh/
# Required fields for generating any report using the RoCA::CreateReport() function
template: https://raw.githubusercontent.com/zhezhangsh/RoCA/master/template/de/summarize_two/summarize_two.Rmd
output: examples/rnaseq                                                             # Where to write all the output files
home: http://zhezhangsh.github.io/RoCA                                              # URL or path to the project home page. Leave it empty if the page doesn't exist.
analyst: Zhe Zhang                                                                  # Name of the analyst
zip: no                                                                             # Whether to zip all output files

#################
##### ABOUT #####
#################
# Description of this analysis, could be any name/text pairs
# Description of this analysis, could be any name/text pairs
description:      
  Project: "Transcriptome in immune cells of control-patient samples"
  Data: "Rna-seq data was generated from of 2 types of immune cells of 3 controls and 3 patients. 
        Raw data was processed to get gene-level read counts.
        Pairwise comparisons were performed between controls and patients in each immune cell."
  Analysis: "This is a demo."

##################
##### INPUTS #####
##################
# Prepared input data, saved in .rds format using the saveRDS() function
input:
  sample: https://raw.githubusercontent.com/zhezhangsh/RoCA/master/data/log/pairwise_comparison/immune_cells/sample.rds                # table of sample feature
  geneset: https://raw.githubusercontent.com/zhezhangsh/RoCA/master/data/gene.set/human.rds # collection of gene sets: https://github.com/zhezhangsh/RoCA/tree/master/data/gene.set
  comparison: https://raw.githubusercontent.com/zhezhangsh/RoCA/master/data/log/pairwise_comparison/immune_cells/comparison_2.txt

######################
##### PARAMETERS #####
######################
# Parameters to run this analysis
parameter:
  gene:
    union: yes                  # union all gene IDs of both comparison, use their intersection otherwise
    pvalue: 0.01                # p value cutoff to select DEG of inidividual comparisons
    anova:                      # ANOVA analysis of all groups of both comparisons
      f1: Cell                   # Column name of <sample> distinguishing the 2 comparisons
      f2: SLE                    # Column name of <sample> distinguishing the 2 groups to be compared in each comparison
      formula: d ~ Cell * SLE    # ANOVA formula, must include f1*f2
      core: 4                    # Number of cores for parallel computing
      p: 0.01                    # p value cutoff of ANOVA result
    processing:                 # for ANOVA, whether data has been log-transformed and normalized
      logged: no                 # <no> if RNA-seq read count; <yes> if RMA processed microarray data 
      normalized: no             # <no> if RNA-seq read count; <yes> if RMA processed microarray data 
  geneset:                      # cutoff of filter gene sets by size
    min: 10
    max: 500
    cluster:                    # options to cluster genes across all samples in both comparisons
      panova: 0.01        # cutoff of ANOVA p value to select seed genes, lower with bigger sample size
      top: 1000           # maximum number of seed genes to selecthigher with bigger sample size  
      seed: 8            # number of seed clusters           
      merge:                    # options to merge original clusters 
        corr: 0.8         # cutoff of correlation coefficient to merge 2 clusters  
        p: 0.01           # cutoff of correlation p values to merge 2 clusters, lower with bigger sample size       
      recluster:                # options to recluster more genes
        time: 20          # re-cluster seed genes for multiple times
        corr: 0.8         # cutoff of correlation coefficient to cluster centroid
        diff: 0.2         # higher if want more distinctive clusters
        nmax: 1000        # max size of each cluster
