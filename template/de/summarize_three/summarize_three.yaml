#############################################################################################################################
# Prepare the following data objects in text, Excel or R files to run this analysis
# <sample> a table of sample feature saved in a .txt, .tab, .csv, .xlxs, .xls, .rdata, .rda, or .rds file
#   - the first column or the row names of an R object must be unique sample ID matching samples of all 3 comparisons
#   - must have a column corresponding to which comparison the sample belongs to
#   - must have a column corresponding to the compared feature in all comparisons
# <geneset> a list of 2 elements saved in a .rdata, .rda, or .rds file
#   - It should be used for all 3 pairwise comparisons
#   - See https://raw.githubusercontent.com/zhezhangsh/RoCA/master/data/gene.set for examples
#   - The first element of the list is a table of gene set annotation
#   - The second element of this list is itself of a list of gene-gene set mapping
#   - The element names of the seconde element must match the row names of the first element
# <comparison> a list of file/directory names of 3 pairwise comparisons 
#   - Each comparison must be performed by: https://github.com/zhezhangsh/RoCA/tree/master/template/de/pairwise_comparison
#   - Elements are named by comparison names
#   - If each element is a directory name, assume the index file is <index.html> and the result file is <R/result.rds>
#   - Otherwise, specify the names of the index and result files
#############################################################################################################################

####################
##### REQUIRED #####
####################
# Required fields for generating any report using the RoCA::CreateReport() function
# template: https://raw.githubusercontent.com/zhezhangsh/
# Required fields for generating any report using the RoCA::CreateReport() function
template: summarize_three.Rmd
output: examples/rnaseq                                                             # Where to write all the output files
home: http://zhezhangsh.github.io/RoCA                                              # URL or path to the project home page. Leave it empty if the page doesn't exist.
analyst: Zhe Zhang                                                                  # Name of the analyst
zip: no                                                                             # Whether to zip all output files

#################
##### ABOUT #####
#################
# Description of this analysis, could be any name/text pairs
# Description of this analysis, could be any name/text pairs
description:      
  Project: "Transcriptome in immune cells of control-patient samples"
  Data: "Rna-seq data was generated from of 3 types of immune cells of 3 controls and 3 patients. 
        Raw data was processed to get gene-level read counts."
  Analysis: "This is a demo."

##################
##### INPUTS #####
##################
# Prepared input data, saved in .rds format using the saveRDS() function
input:
  sample: sample.rds                # table of sample feature
  geneset: human.rds                # collection of gene sets: https://github.com/zhezhangsh/RoCA/tree/master/data/gene.set
  comparison:                       # the comparisons done by https://github.com/zhezhangsh/RoCA/tree/master/template/de/pairwise_comparison
    B_Cell:               # comparison name; could be a path to a folder or 2 individual files
      result: b_cell.rds    # the <result.rds> file generated by the individual comparison
      index: ~             # the <index.html> file generated by the individual comparison
    T_Cell: 
      result: t_cell.rds            
      index: ~
    Monocyte: 
      result: monocyte.rds          
      index: ~

######################
##### PARAMETERS #####
######################
# Parameters to run this analysis
parameter:
  gene:
    union: yes                  # union all gene IDs of all comparison, use their intersection otherwise
    pvalue: 0.01                # p value cutoff to select DEG of inidividual comparisons
    anova:                      # ANOVA analysis of all groups of all comparisons
      f1: Cell                   # Column name of <sample> distinguishing the 3 comparisons
      f2: SLE                    # Column name of <sample> distinguishing the 2 groups to be compared in each comparison
      formula: d ~ Cell * SLE    # ANOVA formula, must include f1*f2
      core: 4                    # Number of cores for parallel computing
      p: 0.01                    # p value cutoff of ANOVA result
    processing:                 # for ANOVA, whether data has been log-transformed and normalized
      logged: no                 # <no> if RNA-seq read count; <yes> if RMA processed microarray data 
      normalized: no             # <no> if RNA-seq read count; <yes> if RMA processed microarray data 
  geneset:                      # cutoff of filter gene sets by size
    min: 10
    max: 500
    cluster:                    # options to cluster genes across all samples in all 3 comparisons
      panova: 0.01        # cutoff of ANOVA p value to select seed genes, lower with bigger sample size
      top: 1200           # maximum number of seed genes to selecthigher with bigger sample size  
      seed: 12            # number of seed clusters           
      merge:                    # options to merge original clusters 
        corr: 0.8         # cutoff of correlation coefficient to merge 2 clusters, higher with bigger sample size  
        p: 0.01           # cutoff of correlation p values to merge 2 clusters, lower with bigger sample size       
      recluster:                # options to recluster more genes
        time: 20          # re-cluster seed genes for multiple times
        corr: 0.85        # cutoff of correlation coefficient to cluster centroid, higher with bigger sample size  
        diff: 0.1         # higher if want more distinctive clusters
        nmax: 500         # max size of each cluster
