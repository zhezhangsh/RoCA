hs <- readRDS("/Users/zhangz/Documents/RoCA/data/gene.set/human.rds")
library("org.Hs.eg.db", lib.loc="~/Library/R/3.3/library")
x <- org.Hs.egSYMBOL
# Get the gene symbol that are mapped to an entrez gene identifiers
mapped_genes <- mappedkeys(x)
# Convert to a list
xx <- as.list(x[mapped_genes])
x <- unlit(xx)
x <- unlist(xx)
names(x) <- names(xx)
l <- hs[[2]]
length(l)
a <- rep(names(l), sapply(l, length))
b <- as.vector(unlist(l))
c <- x[b]
names(c) <- a
c <- c[!is.na(c)]
l0 <- split(as.vector(c), names(c))
length(l0)
l0[1:2]
l0 <- lapply(l0, unique)
a <- hs[[1]]
dim(a)
dim(a)
length(l0)
a <- hs[[1]]
a <- a[rownames(a) %in% names(l0), ]
l0 <- l0[rownames(a)]
a$Size <- sapply(l0, length)
dim(a)
a[1:2, ]
length(l0)
dim(a)
hs$meta <- a
hs$list <- l0
dir()
saveRDS(hs, 'human_symbol.rds')
